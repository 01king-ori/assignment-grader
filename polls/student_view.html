{% extends 'base.html' %}

{% block title %}Student View{% endblock %}

{% block content %}
<h2>Your Courses and Assignments</h2>
<ul>
    {% for course in assignments.values_list('course__name', flat=True).distinct %}
        <li><b>{{ course }}</b></li>
        <ul>
            {% for assignment in assignments.filter(course__name=course) %}
                <li>
                    <a href="{% url 'assignment_detail' assignment.id %}">{{ assignment.title }}</a> (Due: {{ assignment.due_date }})
                    {% if submission := submissions.filter(assignment=assignment).first %}
                        - Grade: {{ submission.grade }} ({{ submission.feedback }})
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% endfor %}
</ul>
{% endblock %}

